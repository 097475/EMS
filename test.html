<pre>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">LedControl</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> &nbsp;<font color="#434f54">&#47;&#47; LED matrix library</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><font color="#000000">SimpleDHT</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> &nbsp;<font color="#434f54">&#47;&#47; DHT library</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">SevenSegmentExtended</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47;7-seg libraries</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">SevenSegmentTM1637</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">TimerOne</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47;internal timer</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><font color="#000000">RTClib</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47;RTC clock</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><font color="#d35400">Wire</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47;allows I2C communication </font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><font color="#000000">Adafruit_GFX</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47; graphics library</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><font color="#000000">Adafruit_PCD8544</font><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47;nokia display library</font>
<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">Entropy</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font> <font color="#434f54">&#47;&#47;for random numbers</font>
<font color="#5e6d03">#include</font> <font color="#005c5f">&#34;pitches.h&#34;</font> <font color="#434f54">&#47;&#47;provides all the notes played by the buzzer</font>

<font color="#434f54">&#47;&#47;states</font>
<font color="#5e6d03">#define</font> <font color="#000000">IDLS</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">0</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; IDLe Status 00000001 &nbsp;</font>
<font color="#5e6d03">#define</font> <font color="#000000">EHRS</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">1</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing HouRS 00000010</font>
<font color="#5e6d03">#define</font> <font color="#000000">EMIN</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">2</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing MINutes 00000100</font>
<font color="#5e6d03">#define</font> <font color="#000000">EAHR</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">3</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing Alarm HouRs</font>
<font color="#5e6d03">#define</font> <font color="#000000">EAMI</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">4</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing Alarm MInutes</font>
<font color="#5e6d03">#define</font> <font color="#000000">EYRS</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">5</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing YeaRS</font>
<font color="#5e6d03">#define</font> <font color="#000000">EMTH</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">6</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing MonTHs</font>
<font color="#5e6d03">#define</font> <font color="#000000">EDAY</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">7</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; Editing DAYs</font>
<font color="#5e6d03">#define</font> <font color="#000000">RING</font> <font color="#000000">(</font><font color="#000000">1</font><font color="#434f54">&lt;&lt;</font><font color="#000000">8</font><font color="#000000">)</font> <font color="#434f54">&#47;&#47; RINGing </font>
<font color="#434f54">&#47;&#47; buttons</font>
<font color="#5e6d03">#define</font> <font color="#000000">BB1</font> <font color="#000000">0</font> <font color="#434f54">&#47;&#47;black button 1</font>
<font color="#5e6d03">#define</font> <font color="#000000">BB2</font> <font color="#000000">1</font> <font color="#434f54">&#47;&#47;black button 2</font>
<font color="#5e6d03">#define</font> <font color="#000000">BR</font> <font color="#000000">3</font> &nbsp;<font color="#434f54">&#47;&#47;red button</font>
<font color="#5e6d03">#define</font> <font color="#000000">BL</font> <font color="#000000">2</font> &nbsp;<font color="#434f54">&#47;&#47;switch</font>
<font color="#5e6d03">#define</font> <font color="#000000">BUTTONS</font> <font color="#000000">3</font> <font color="#434f54">&#47;&#47;polled buttons</font>
<font color="#434f54">&#47;&#47; 7-segments</font>
<font color="#5e6d03">#define</font> <font color="#000000">CLK</font> <font color="#000000">4</font> &nbsp;
<font color="#5e6d03">#define</font> <font color="#000000">DIO</font> <font color="#000000">5</font>
<font color="#5e6d03">#define</font> <font color="#000000">OFF</font> <font color="#000000">0x80</font> <font color="#434f54">&#47;&#47;turns off a digit while leaving the semi-colon on</font>
<font color="#434f54">&#47;&#47;buzzer</font>
<font color="#5e6d03">#define</font> <font color="#000000">BUZZER</font> <font color="#000000">6</font> 
<font color="#5e6d03">#define</font> <font color="#000000">MELODY_LENGTH</font> <font color="#000000">20</font> 
<font color="#434f54">&#47;&#47; DHT sensor</font>
<font color="#5e6d03">#define</font> <font color="#000000">DHTPIN</font> <font color="#000000">A0</font>
<font color="#434f54">&#47;&#47; animations</font>
<font color="#5e6d03">#define</font> <font color="#000000">IDLSANIM</font> <font color="#000000">0</font>
<font color="#5e6d03">#define</font> <font color="#000000">ETANIM</font> <font color="#000000">1</font>
<font color="#5e6d03">#define</font> <font color="#000000">EYRANIM</font> <font color="#000000">2</font>
<font color="#5e6d03">#define</font> <font color="#000000">EMTHANIM</font> <font color="#000000">3</font>
<font color="#5e6d03">#define</font> <font color="#000000">EDAYANIM</font> <font color="#000000">4</font>
<font color="#5e6d03">#define</font> <font color="#000000">RINGANIM</font> <font color="#000000">5</font>
<font color="#434f54">&#47;&#47;animation settings</font>
<font color="#5e6d03">#define</font> <font color="#000000">MATRIXLEN</font> <font color="#000000">8</font>
<font color="#5e6d03">#define</font> <font color="#000000">ANIMLEN</font> <font color="#000000">4</font>
<font color="#5e6d03">#define</font> <font color="#000000">REPS</font> <font color="#000000">3</font>
<font color="#434f54">&#47;&#47;photoresistor pin</font>
<font color="#5e6d03">#define</font> <font color="#000000">PHOTORES</font> <font color="#000000">A3</font>
<font color="#434f54">&#47;&#47;LED matrix pins</font>
<font color="#5e6d03">#define</font> <font color="#000000">LDIN</font> <font color="#000000">7</font>
<font color="#5e6d03">#define</font> <font color="#000000">CS</font> <font color="#000000">8</font>
<font color="#5e6d03">#define</font> <font color="#000000">LCLK</font> <font color="#000000">9</font>
<font color="#434f54">&#47;&#47;nokia display pins</font>
<font color="#5e6d03">#define</font> <font color="#000000">RST</font> <font color="#000000">10</font>
<font color="#5e6d03">#define</font> <font color="#000000">DC</font> <font color="#000000">11</font>
<font color="#5e6d03">#define</font> <font color="#000000">DIN</font> <font color="#000000">12</font>
<font color="#5e6d03">#define</font> <font color="#000000">SCLK</font> <font color="#000000">13</font>
<font color="#434f54">&#47;&#47;joystick pins</font>
<font color="#5e6d03">#define</font> <font color="#000000">OX</font> <font color="#000000">A2</font>
<font color="#5e6d03">#define</font> <font color="#000000">OY</font> <font color="#000000">A1</font>
<font color="#434f54">&#47;&#47;game settings</font>
<font color="#5e6d03">#define</font> <font color="#000000">HOWMANY</font> <font color="#000000">4</font> <font color="#434f54">&#47;&#47;how many arrows</font>
<font color="#5e6d03">#define</font> <font color="#000000">TIMEFORGOODANSWER</font> <font color="#000000">200</font> <font color="#434f54">&#47;&#47; in milisecound time when one dot so for move you have TIMEFORGOODANSWER*3</font>

<b><font color="#d35400">SevenSegmentExtended</font></b> &nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">CLK</font><font color="#434f54">,</font> <font color="#000000">DIO</font><font color="#000000">)</font><font color="#000000">;</font> 
<b><font color="#d35400">LedControl</font></b> <font color="#000000">lc</font> <font color="#434f54">=</font> <b><font color="#d35400">LedControl</font></b><font color="#000000">(</font><font color="#000000">LDIN</font><font color="#434f54">,</font> <font color="#000000">LCLK</font><font color="#434f54">,</font> <font color="#000000">CS</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
<b><font color="#d35400">SimpleDHT11</font></b> <font color="#000000">dht11</font><font color="#000000">(</font><font color="#000000">DHTPIN</font><font color="#000000">)</font><font color="#000000">;</font>
<b><font color="#d35400">RTC_DS1307</font></b> <font color="#000000">RTC</font><font color="#000000">;</font> &nbsp;
<b><font color="#d35400">DateTime</font></b> <font color="#d35400">now</font><font color="#000000">;</font> &nbsp;
<font color="#000000">Adafruit_PCD8544</font> <font color="#000000">nokiaDisplay</font> <font color="#434f54">=</font> <font color="#000000">Adafruit_PCD8544</font><font color="#000000">(</font><font color="#000000">SCLK</font><font color="#434f54">,</font> <font color="#000000">DIN</font><font color="#434f54">,</font> <font color="#000000">DC</font><font color="#434f54">,</font> <font color="#000000">RST</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#00979c">byte</font> <font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#000000">18</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">}</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;buffer for current date values being edited</font>
<font color="#00979c">byte</font> <font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">}</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; buffer for current time values being edited</font>
<font color="#00979c">byte</font> <font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">}</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; data structure that holds the alarm time</font>
<font color="#00979c">boolean</font> <font color="#000000">showAlarm</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47; when false show time, when true show the alarm</font>
<font color="#00979c">volatile</font> <font color="#00979c">boolean</font> <font color="#000000">armed</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47; when false the alarm is off, when true the alarm is on; volatile because of interrupts</font>
<font color="#00979c">short</font> <font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">IDLS</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;current state, here idle is default</font>
<font color="#00979c">boolean</font> <font color="#d35400">noBlink</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;when false is blinking, when true - stop blinking for a second</font>
<font color="#00979c">unsigned</font> <font color="#00979c">long</font> <font color="#000000">blinkTimer</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; time since the blinking was stopped</font>
<font color="#00979c">byte</font> <font color="#000000">currentNote</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font><font color="#434f54">&#47;&#47;note to be played in the current call</font>
<font color="#00979c">byte</font> <font color="#000000">rep</font> <font color="#434f54">=</font> <font color="#000000">REPS</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; number of animation repetitions elapsed, when equal to REPS no animation is played</font>
<font color="#00979c">byte</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">IDLSANIM</font><font color="#000000">;</font>
<font color="#434f54">&#47;&#47;animations</font>
<font color="#00979c">const</font> <font color="#00979c">byte</font> <font color="#000000">animations</font><font color="#000000">[</font><font color="#000000">]</font><font color="#000000">[</font><font color="#000000">4</font><font color="#000000">]</font><font color="#000000">[</font><font color="#000000">8</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font>
 &nbsp;<font color="#000000">{</font><font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xe4</font><font color="#434f54">,</font> <font color="#000000">0xa4</font><font color="#434f54">,</font> <font color="#000000">0xee</font><font color="#434f54">,</font> <font color="#000000">0x84</font><font color="#434f54">,</font> <font color="#000000">0x87</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xe4</font><font color="#434f54">,</font> <font color="#000000">0xa4</font><font color="#434f54">,</font> <font color="#000000">0xee</font><font color="#434f54">,</font> <font color="#000000">0x84</font><font color="#434f54">,</font> <font color="#000000">0x87</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xc0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xe4</font><font color="#434f54">,</font> <font color="#000000">0xa4</font><font color="#434f54">,</font> <font color="#000000">0xee</font><font color="#434f54">,</font> <font color="#000000">0x84</font><font color="#434f54">,</font> <font color="#000000">0x87</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xd8</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xe4</font><font color="#434f54">,</font> <font color="#000000">0xa4</font><font color="#434f54">,</font> <font color="#000000">0xee</font><font color="#434f54">,</font> <font color="#000000">0x84</font><font color="#434f54">,</font> <font color="#000000">0x87</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xdb</font><font color="#000000">}</font><font color="#000000">}</font><font color="#434f54">,</font>
 &nbsp;<font color="#000000">{</font><font color="#000000">{</font><font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x9f</font><font color="#434f54">,</font> <font color="#000000">0x81</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x52</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0xf1</font><font color="#434f54">,</font> <font color="#000000">0x81</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x52</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x91</font><font color="#434f54">,</font> <font color="#000000">0x81</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#000000">}</font><font color="#000000">}</font><font color="#434f54">,</font>
 &nbsp;<font color="#000000">{</font><font color="#000000">{</font><font color="#000000">0xae</font><font color="#434f54">,</font> <font color="#000000">0xa8</font><font color="#434f54">,</font> <font color="#000000">0xa8</font><font color="#434f54">,</font> <font color="#000000">0xee</font><font color="#434f54">,</font> <font color="#000000">0x48</font><font color="#434f54">,</font> <font color="#000000">0x48</font><font color="#434f54">,</font> <font color="#000000">0x48</font><font color="#434f54">,</font> <font color="#000000">0x4e</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x4e</font><font color="#434f54">,</font> <font color="#000000">0xaa</font><font color="#434f54">,</font> <font color="#000000">0xaa</font><font color="#434f54">,</font> <font color="#000000">0xee</font><font color="#434f54">,</font> <font color="#000000">0xac</font><font color="#434f54">,</font> <font color="#000000">0xaa</font><font color="#434f54">,</font> <font color="#000000">0xaa</font><font color="#434f54">,</font> <font color="#000000">0xaa</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x64</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0xa5</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xff</font><font color="#434f54">,</font> <font color="#000000">0xff</font><font color="#434f54">,</font> <font color="#000000">0x7e</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x88</font><font color="#434f54">,</font> <font color="#000000">0xeb</font><font color="#434f54">,</font> <font color="#000000">0x2a</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xff</font><font color="#434f54">,</font> <font color="#000000">0xff</font><font color="#434f54">,</font> <font color="#000000">0x7e</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#000000">}</font><font color="#000000">}</font><font color="#434f54">,</font>
 &nbsp;<font color="#000000">{</font><font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x6c</font><font color="#434f54">,</font> <font color="#000000">0x54</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x7c</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x7c</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x64</font><font color="#434f54">,</font> <font color="#000000">0x54</font><font color="#434f54">,</font> <font color="#000000">0x4c</font><font color="#434f54">,</font> <font color="#000000">0x44</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0xea</font><font color="#434f54">,</font> <font color="#000000">0x4e</font><font color="#434f54">,</font> <font color="#000000">0x4a</font><font color="#434f54">,</font> <font color="#000000">0x4a</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#000000">}</font><font color="#434f54">,</font>
 &nbsp;<font color="#000000">{</font><font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x38</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x38</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x4</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x89</font><font color="#434f54">,</font> <font color="#000000">0x5a</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x5a</font><font color="#434f54">,</font> <font color="#000000">0x81</font><font color="#000000">}</font><font color="#000000">}</font><font color="#434f54">,</font>
 &nbsp;<font color="#000000">{</font><font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x18</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x3c</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#434f54">,</font> <font color="#000000">{</font><font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x24</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#434f54">,</font> <font color="#000000">0x7e</font><font color="#434f54">,</font> <font color="#000000">0x42</font><font color="#434f54">,</font> <font color="#000000">0x7e</font><font color="#434f54">,</font> <font color="#000000">0x0</font><font color="#000000">}</font><font color="#000000">}</font>
<font color="#000000">}</font><font color="#000000">;</font>
<font color="#434f54">&#47;&#47; the notes to be played, as defined in pitches.h</font>
<font color="#00979c">const</font> <font color="#00979c">int</font> <font color="#000000">melody</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">NOTE_C4</font><font color="#434f54">,</font> <font color="#000000">NOTE_D4</font><font color="#434f54">,</font> <font color="#000000">NOTE_F4</font><font color="#434f54">,</font> <font color="#000000">NOTE_D4</font><font color="#434f54">,</font> <font color="#000000">NOTE_A4</font><font color="#434f54">,</font> <font color="#000000">PAUSE</font><font color="#434f54">,</font> <font color="#000000">NOTE_A4</font><font color="#434f54">,</font> <font color="#000000">NOTE_G4</font><font color="#434f54">,</font> <font color="#000000">PAUSE</font><font color="#434f54">,</font> <font color="#000000">NOTE_C4</font><font color="#434f54">,</font> <font color="#000000">NOTE_D4</font><font color="#434f54">,</font> <font color="#000000">NOTE_F4</font><font color="#434f54">,</font> <font color="#000000">NOTE_D4</font><font color="#434f54">,</font> <font color="#000000">NOTE_G4</font><font color="#434f54">,</font> <font color="#000000">PAUSE</font><font color="#434f54">,</font> <font color="#000000">NOTE_G4</font><font color="#434f54">,</font> <font color="#000000">NOTE_F4</font><font color="#434f54">,</font> <font color="#000000">PAUSE</font><font color="#434f54">,</font> <font color="#000000">PAUSE</font><font color="#434f54">,</font> <font color="#000000">PAUSE</font>
<font color="#000000">}</font><font color="#000000">;</font>

<font color="#434f54">&#47;&#47;the length of each note</font>
<font color="#00979c">const</font> <font color="#00979c">byte</font> <font color="#000000">noteDurations</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">HALF_NOTE</font><font color="#434f54">,</font> <font color="#000000">HALF_NOTE</font><font color="#434f54">,</font> <font color="#000000">QUARTER_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">EIGHT_NOTE</font><font color="#434f54">,</font> <font color="#000000">HALF_NOTE</font><font color="#434f54">,</font> <font color="#000000">HALF_NOTE</font><font color="#434f54">,</font> <font color="#000000">QUARTER_NOTE</font><font color="#434f54">,</font> <font color="#000000">QUARTER_NOTE</font><font color="#434f54">,</font> <font color="#000000">QUARTER_NOTE</font>
<font color="#000000">}</font><font color="#000000">;</font>
<font color="#00979c">byte</font> <font color="#000000">currentArrow</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;which arrow is processed right now</font>
<font color="#00979c">byte</font> <font color="#000000">numberDots</font> <font color="#434f54">=</font> <font color="#000000">3</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;how many dots there gonna be</font>
<font color="#00979c">unsigned</font> <font color="#00979c">long</font> <font color="#000000">timeChecker</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;timer</font>
<font color="#00979c">bool</font> <font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;after every good answer you have to come back to 0 position</font>
<font color="#00979c">bool</font> <font color="#000000">winTheGame</font> &nbsp;<font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; global</font>
<font color="#00979c">byte</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">HOWMANY</font><font color="#000000">]</font><font color="#000000">;</font>

<font color="#434f54">&#47;&#47; prints an 8bit image on the LED matrix</font>
<font color="#00979c">void</font> <font color="#000000">writeByteArray</font><font color="#000000">(</font><font color="#00979c">byte</font> <font color="#434f54">*</font><font color="#000000">src</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">MATRIXLEN</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">lc</font><font color="#434f54">.</font><font color="#d35400">setRow</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">i</font><font color="#434f54">,</font> <font color="#000000">src</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;starts the animations by setting the elapsed repetitions to 0 - the animation is repeated till REPS</font>
<font color="#00979c">void</font> <font color="#000000">startAnimation</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;<font color="#000000">rep</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">lc</font><font color="#434f54">.</font><font color="#d35400">shutdown</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font><font color="#00979c">false</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47; runs the next image in the animation</font>
<font color="#00979c">void</font> <font color="#000000">animate</font><font color="#000000">(</font><font color="#00979c">byte</font> <font color="#000000">(</font><font color="#434f54">*</font><font color="#000000">src</font><font color="#000000">)</font><font color="#000000">[</font><font color="#000000">8</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">byte</font> <font color="#000000">curr</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">writeByteArray</font><font color="#000000">(</font><font color="#000000">src</font><font color="#000000">[</font><font color="#000000">curr</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">curr</font> <font color="#434f54">=</font> <font color="#000000">(</font><font color="#434f54">++</font><font color="#000000">curr</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">ANIMLEN</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">curr</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">rep</font><font color="#434f54">++</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;here we put the melody that will be played when the alarm is on</font>
<font color="#00979c">void</font> <font color="#000000">playMelody</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">long</font> <font color="#000000">notePause</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">betweenPause</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">bool</font> <font color="#000000">isPlaying</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#434f54">,</font> <font color="#000000">isWaiting</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">int</font> <font color="#000000">noteDuration</font><font color="#434f54">,</font><font color="#000000">pauseBetweenNotes</font><font color="#434f54">,</font><font color="#000000">actualPause</font><font color="#434f54">,</font><font color="#000000">curr</font><font color="#000000">;</font>
 &nbsp;
 &nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#434f54">!</font><font color="#000000">isPlaying</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">noteDuration</font> <font color="#434f54">=</font> <font color="#000000">1000</font> <font color="#434f54">&#47;</font> <font color="#000000">noteDurations</font><font color="#000000">[</font><font color="#000000">currentNote</font><font color="#000000">]</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;length of the note</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">pauseBetweenNotes</font> <font color="#434f54">=</font> <font color="#000000">noteDuration</font> <font color="#434f54">*</font> <font color="#000000">1.30</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;calculating an adequate pause prior the next note</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">actualPause</font> <font color="#434f54">=</font> <font color="#000000">pauseBetweenNotes</font> <font color="#434f54">-</font> <font color="#000000">noteDuration</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">curr</font> <font color="#434f54">=</font> <font color="#000000">melody</font><font color="#000000">[</font><font color="#000000">currentNote</font><font color="#000000">]</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">curr</font> <font color="#434f54">!=</font> <font color="#000000">PAUSE</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">tone</font><font color="#000000">(</font><font color="#000000">BUZZER</font><font color="#434f54">,</font> <font color="#000000">melody</font><font color="#000000">[</font><font color="#000000">currentNote</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">noteDuration</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; playing the note on the buzzer pin</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">notePause</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">isPlaying</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">notePause</font> <font color="#434f54">+</font> <font color="#000000">noteDuration</font> <font color="#434f54">&gt;</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font> 
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 &nbsp;<font color="#d35400">noTone</font><font color="#000000">(</font><font color="#000000">BUZZER</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 &nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">BUZZER</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#434f54">!</font><font color="#000000">isWaiting</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">betweenPause</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">isWaiting</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">betweenPause</font> <font color="#434f54">+</font> <font color="#000000">actualPause</font> <font color="#434f54">&gt;</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font>


 &nbsp;<font color="#000000">currentNote</font> <font color="#434f54">=</font> <font color="#000000">(</font><font color="#434f54">++</font><font color="#000000">currentNote</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">MELODY_LENGTH</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;change index to the next note (the melody will replay using modulo math)</font>
 &nbsp;<font color="#000000">isPlaying</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">isWaiting</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>

<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;interrupt service routine on PIN 2</font>
<font color="#434f54">&#47;&#47; sets the armed flag to enable or disable the alarm</font>
<font color="#00979c">void</font> <font color="#000000">BLHandler</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">digitalRead</font><font color="#000000">(</font><font color="#000000">BL</font><font color="#000000">)</font> <font color="#434f54">==</font> <font color="#00979c">LOW</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">armed</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">else</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">armed</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;function that sets the time on the RTC; notice that for now the date isn&#39;t set, and that the second is always 0</font>
<font color="#00979c">void</font> <font color="#000000">adjustClock</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#434f54">&#47;&#47;DateTime (uint16_t year, uint8_t month, uint8_t day,uint8_t hour =0, uint8_t min =0, uint8_t sec =0);</font>
 &nbsp;<font color="#000000">RTC</font><font color="#434f54">.</font><font color="#d35400">adjust</font><font color="#000000">(</font><b><font color="#d35400">DateTime</font></b><font color="#000000">(</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">+</font> <font color="#000000">2000</font><font color="#434f54">,</font> <font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;interrupt service routine on Timer1 - executed every 0.5s</font>
<font color="#00979c">void</font> <font color="#000000">displayTime</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">byte</font> <font color="#d35400">status</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;used for blinking, if it&#39;s 0 - the selected segments are off, when 1 the segments are on</font>
 &nbsp;<font color="#5e6d03">switch</font> <font color="#000000">(</font><font color="#000000">state</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; in IDLE state, we either show the current time or the alarm time, depending on the showAlarm flag</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; in current time view, the semicolon is blinking using the status variable</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">IDLS</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">RING</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">showAlarm</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font> <font color="#5e6d03">else</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">hour</font><font color="#000000">(</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">minute</font><font color="#000000">(</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#d35400">status</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; in editing alarm hours or current time hours, we blink the 0th and 1st digit from the right</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;the first instruction prints the whole alarm or current time</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; then if status is true and the noBlink flag is false, the first 2 digits are turned off</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EAHR</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">status</font> <font color="#434f54">&amp;&amp;</font> <font color="#434f54">!</font><font color="#d35400">noBlink</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EHRS</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">status</font> <font color="#434f54">&amp;&amp;</font> <font color="#434f54">!</font><font color="#d35400">noBlink</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;likewise, but for the 2nd and 3rd digit</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EAMI</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">status</font> <font color="#434f54">&amp;&amp;</font> <font color="#434f54">!</font><font color="#d35400">noBlink</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EMIN</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">status</font> <font color="#434f54">&amp;&amp;</font> <font color="#434f54">!</font><font color="#d35400">noBlink</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printRaw</font><font color="#000000">(</font><font color="#000000">(</font><font color="#00979c">uint8_t</font><font color="#000000">)</font><font color="#000000">OFF</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">default</font><font color="#434f54">:</font> &nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">printTime</font><font color="#000000">(</font><font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>

 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#d35400">status</font> <font color="#434f54">=</font> <font color="#000000">(</font><font color="#434f54">++</font><font color="#d35400">status</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">2</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;status is being toggled</font>
<font color="#000000">}</font>


<font color="#434f54">&#47;&#47;handles the big red button, receives as argument the reading on the connected PIN (HIGH or LOW) - the button is active HIGH</font>
<font color="#434f54">&#47;&#47;this button is tasked to execute state transitions</font>
<font color="#00979c">void</font> <font color="#000000">BRHandler</font><font color="#000000">(</font><font color="#00979c">byte</font> <font color="#000000">reading</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">long</font> <font color="#000000">startpressed</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">endpressed</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;timers to count how long it has been pressed</font>

 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font> <font color="#000000">reading</font> <font color="#434f54">==</font> <font color="#00979c">HIGH</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">startpressed</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;button has been pressed; we record the time with millis()</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">else</font>
 &nbsp;<font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">startpressed</font> <font color="#434f54">+</font> <font color="#000000">1000</font> <font color="#434f54">&lt;</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font> <font color="#434f54">&#47;&#47; if the difference between timings is over 1000 msec, then it&#39;s a long press</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">IDLS</font><font color="#000000">)</font> <font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;long presses are valid only if we&#39;re in IDLS state</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">hour</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;we record the current time on the timeArray; this is the starting value to start editing current time</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">minute</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">year</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">-</font> <font color="#000000">2000</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">month</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">day</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EHRS</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">ETANIM</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">startAnimation</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">else</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;state transitions</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">switch</font> <font color="#000000">(</font><font color="#000000">state</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">IDLS</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EAHR</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">ETANIM</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EHRS</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EMIN</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">ETANIM</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EMIN</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EYRS</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">EYRANIM</font><font color="#000000">;</font><font color="#5e6d03">break</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;here we also write the edited time in timeArray to the RTC clock</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EYRS</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EMTH</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">EMTHANIM</font><font color="#000000">;</font><font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EMTH</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EDAY</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">EDAYANIM</font><font color="#000000">;</font><font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EDAY</font><font color="#434f54">:</font> &nbsp;<font color="#000000">adjustClock</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">IDLS</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">IDLSANIM</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EAHR</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">EAMI</font><font color="#000000">;</font> <font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">ETANIM</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EAMI</font><font color="#434f54">:</font> &nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">IDLS</font><font color="#000000">;</font> &nbsp;<font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">IDLSANIM</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">RING</font><font color="#434f54">:</font> <font color="#5e6d03">return</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;RING has no associated transitions</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">startAnimation</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;handles the small black button, receives as argument the reading on the connected PIN (HIGH or LOW) - the button is active LOW</font>
<font color="#434f54">&#47;&#47;the button increases numbers - current time or alarm time or toggles between alarm and current time in IDLS state</font>
<font color="#00979c">void</font> <font color="#000000">BBHandler</font><font color="#000000">(</font><font color="#00979c">byte</font> <font color="#000000">reading</font><font color="#434f54">,</font> <font color="#00979c">char</font> <font color="#d35400">direction</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">reading</font> <font color="#434f54">==</font> <font color="#00979c">HIGH</font><font color="#000000">)</font> 
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;ignore HIGH readings</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#434f54">*</font><font color="#000000">toEdit</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; byte pointer used for editing</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#000000">mod</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;byte variable to do modulo math</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#000000">fromOne</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">switch</font> <font color="#000000">(</font><font color="#000000">state</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">IDLS</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">RING</font><font color="#434f54">:</font> <font color="#000000">showAlarm</font> <font color="#434f54">=</font> <font color="#000000">(</font><font color="#000000">showAlarm</font> <font color="#434f54">+</font> <font color="#000000">1</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">2</font><font color="#000000">;</font> <font color="#5e6d03">return</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;toggle alarm and current time, then return</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EHRS</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">24</font><font color="#000000">;</font> &nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; the pointer will now reference the value we want to edit</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EMIN</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">timeArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">60</font><font color="#000000">;</font> &nbsp;&nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EAHR</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">24</font><font color="#000000">;</font> &nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EAMI</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">60</font><font color="#000000">;</font> &nbsp;<font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EYRS</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">100</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EMTH</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">12</font><font color="#000000">;</font> <font color="#000000">fromOne</font> <font color="#434f54">=</font> <font color="#000000">1</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">EDAY</font><font color="#434f54">:</font> <font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#434f54">&amp;</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font><font color="#000000">;</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">31</font><font color="#000000">;</font> <font color="#000000">fromOne</font> <font color="#434f54">=</font> <font color="#000000">1</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font><font color="#434f54">&#47;&#47;additional checks</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">direction</font> <font color="#434f54">==</font> <font color="#434f54">-</font><font color="#000000">1</font> <font color="#434f54">&amp;&amp;</font> <font color="#434f54">*</font><font color="#000000">toEdit</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#434f54">*</font><font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#000000">mod</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">EDAY</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">switch</font> <font color="#000000">(</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">2</font><font color="#434f54">:</font> <font color="#434f54">!</font><font color="#000000">(</font><font color="#000000">(</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">+</font> <font color="#000000">2000</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">4</font><font color="#000000">)</font> <font color="#434f54">&amp;&amp;</font> <font color="#434f54">!</font><font color="#000000">(</font><font color="#434f54">!</font><font color="#000000">(</font><font color="#000000">(</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">+</font> <font color="#000000">2000</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">100</font><font color="#000000">)</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">(</font><font color="#000000">(</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">+</font> <font color="#000000">2000</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">400</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#434f54">?</font> &nbsp;<font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">29</font> <font color="#434f54">:</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">28</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">4</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">6</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">9</font><font color="#434f54">:</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">11</font><font color="#434f54">:</font> <font color="#000000">mod</font> <font color="#434f54">=</font> <font color="#000000">30</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">default</font><font color="#434f54">:</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>

 &nbsp;<font color="#434f54">*</font><font color="#000000">toEdit</font> <font color="#434f54">=</font> <font color="#000000">(</font><font color="#000000">(</font><font color="#000000">(</font><font color="#434f54">*</font><font color="#000000">toEdit</font><font color="#000000">)</font> <font color="#434f54">+</font> <font color="#d35400">direction</font> <font color="#434f54">-</font> <font color="#000000">fromOne</font><font color="#000000">)</font> <font color="#434f54">%</font> <font color="#000000">mod</font><font color="#000000">)</font> <font color="#434f54">+</font> <font color="#000000">fromOne</font> <font color="#000000">;</font> <font color="#434f54">&#47;&#47;increase the value referenced by the pointer and apply the modulo</font>
 &nbsp;<font color="#d35400">noBlink</font> <font color="#434f54">=</font> <font color="#000000">1</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; set the noBlink flag to 1; we don&#39;t want to blink the digits we are editing for a while</font>
 &nbsp;<font color="#000000">blinkTimer</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; start tracking how much time since the last digit editing</font>
 &nbsp;<font color="#000000">displayTime</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; display the new values immediately, not waiting till the next interrupt</font>
 &nbsp;<font color="#000000">displayDate</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;button polling functions</font>
<font color="#00979c">void</font> <font color="#000000">pollButtons</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">long</font> <font color="#000000">debounce</font><font color="#000000">[</font><font color="#000000">BUTTONS</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">}</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#000000">tmpRead</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;temporary value to store button readings</font>
 &nbsp;<font color="#00979c">const</font> <font color="#00979c">byte</font> <font color="#000000">buttons</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#000000">BB1</font><font color="#434f54">,</font> <font color="#000000">BB2</font><font color="#434f54">,</font> <font color="#000000">BR</font><font color="#000000">}</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; button pins to read</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">byte</font> <font color="#000000">prevButtonStates</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#00979c">HIGH</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">}</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; previous states of buttons, defaulted to inactive values</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">byte</font> <font color="#000000">prevProcStates</font><font color="#000000">[</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">{</font><font color="#00979c">HIGH</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#434f54">,</font> <font color="#00979c">LOW</font><font color="#000000">}</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; previous states of buttons, defaulted to inactive values</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">BUTTONS</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;loop each button</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">tmpRead</font> <font color="#434f54">=</font> <font color="#d35400">digitalRead</font><font color="#000000">(</font><font color="#000000">buttons</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;read the button pin</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">tmpRead</font> <font color="#434f54">!=</font> <font color="#000000">prevButtonStates</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">)</font> <font color="#000000">{</font> <font color="#434f54">&#47;&#47;proceed only if the current reading is different than the previous state of button HIGH-&gt;LOW or LOW -&gt; HIGH</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">debounce</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">prevButtonStates</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">tmpRead</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;update the previous button states array</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">debounce</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">+</font> <font color="#000000">25</font> <font color="#434f54">&lt;</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">tmpRead</font> <font color="#434f54">!=</font> <font color="#000000">prevProcStates</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">switch</font> <font color="#000000">(</font><font color="#000000">i</font><font color="#000000">)</font> <font color="#000000">{</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;call the appropriate handles passing the reading</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">0</font> <font color="#434f54">:</font> <font color="#000000">BBHandler</font><font color="#000000">(</font><font color="#000000">tmpRead</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">1</font> <font color="#434f54">:</font> <font color="#000000">BBHandler</font><font color="#000000">(</font><font color="#000000">tmpRead</font><font color="#434f54">,</font> <font color="#434f54">-</font><font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">case</font> <font color="#000000">2</font> <font color="#434f54">:</font> <font color="#000000">BRHandler</font><font color="#000000">(</font><font color="#000000">tmpRead</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#5e6d03">break</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">prevProcStates</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#000000">tmpRead</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>


<font color="#00979c">void</font> <font color="#000000">giveValues</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font> <font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">HOWMANY</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">=</font> <font color="#d35400">random</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">4</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; four signs &lt;- -&gt; ^ .</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>


<font color="#00979c">void</font> <font color="#000000">drawSequence</font><font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">y</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#00979c">int</font> <font color="#000000">x</font> <font color="#434f54">=</font> <font color="#000000">12</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">HOWMANY</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">1</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">2</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">3</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">x</font> <font color="#434f54">+=</font> <font color="#000000">15</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">clearArrow</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#000000">12</font> <font color="#434f54">+</font> <font color="#000000">15</font> <font color="#434f54">*</font> <font color="#000000">currentArrow</font><font color="#434f54">,</font> <font color="#000000">20</font><font color="#434f54">,</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>
<font color="#00979c">void</font> <font color="#000000">redrawArrow</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#000000">12</font> <font color="#434f54">+</font> <font color="#000000">15</font> <font color="#434f54">*</font> <font color="#000000">currentArrow</font><font color="#434f54">,</font> <font color="#000000">20</font><font color="#434f54">,</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">drawArrow</font><font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">x</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">direction_</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">color_</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#000000">color</font> <font color="#434f54">=</font> <font color="#000000">1</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">color_</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">color</font> <font color="#434f54">=</font> <font color="#000000">0xFFFF</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;BLACK</font>
 &nbsp;<font color="#5e6d03">else</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">color</font> <font color="#434f54">=</font> <font color="#000000">0x0000</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;WHITE</font>

 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">direction_</font> <font color="#434f54">==</font> <font color="#000000">0</font> <font color="#434f54">||</font> <font color="#000000">direction_</font> <font color="#434f54">==</font> <font color="#000000">1</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">direction_</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">size_</font> <font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">else</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">size_</font> <font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">else</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">direction_</font> <font color="#434f54">==</font> <font color="#000000">2</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">,</font> <font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">-</font> <font color="#000000">size_</font> <font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">else</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">x</font> <font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">writeLine</font><font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font> <font color="#434f54">-</font> <font color="#000000">size_</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>



<font color="#00979c">void</font> <font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">numberDots</font><font color="#000000">)</font> <font color="#000000">{</font> <font color="#434f54">&#47;&#47;check this function</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">numberDots</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">drawRect</font><font color="#000000">(</font><font color="#000000">53</font> <font color="#434f54">+</font> <font color="#000000">12</font> <font color="#434f54">*</font> <font color="#000000">i</font> <font color="#434f54">,</font> <font color="#000000">41</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">0xFFF</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">fillRect</font><font color="#000000">(</font><font color="#000000">53</font> <font color="#434f54">+</font> <font color="#000000">12</font> <font color="#434f54">*</font> <font color="#000000">i</font> <font color="#434f54">,</font> <font color="#000000">41</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">0xFFF</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">numberDots</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">3</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">drawRect</font><font color="#000000">(</font><font color="#000000">53</font> <font color="#434f54">+</font> <font color="#000000">12</font> <font color="#434f54">*</font> <font color="#000000">i</font> <font color="#434f54">,</font> <font color="#000000">41</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">0x0000</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">fillRect</font><font color="#000000">(</font><font color="#000000">53</font> <font color="#434f54">+</font> <font color="#000000">12</font> <font color="#434f54">*</font> <font color="#000000">i</font> <font color="#434f54">,</font> <font color="#000000">41</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">0x0000</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">changeNumberDots</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentArrow</font> <font color="#434f54">&gt;</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">numberDots</font> <font color="#434f54">&lt;=</font> <font color="#000000">0</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">currentArrow</font><font color="#434f54">--</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">redrawArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">numberDots</font> <font color="#434f54">=</font> <font color="#000000">3</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>


<font color="#00979c">bool</font> <font color="#000000">checkWin</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentArrow</font> <font color="#434f54">&gt;</font> <font color="#000000">3</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">winTheGame</font> <font color="#434f54">==</font> <font color="#00979c">false</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">clearDisplay</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">printText</font><font color="#000000">(</font><font color="#005c5f">&#34; You win! &#34;</font><font color="#434f54">,</font> <font color="#000000">11</font><font color="#434f54">,</font> <font color="#000000">17</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">winTheGame</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">winTheGame</font> <font color="#434f54">==</font> <font color="#00979c">false</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font> <font color="#00979c">false</font><font color="#000000">;</font>
<font color="#000000">}</font>


<font color="#00979c">void</font> <font color="#000000">changeOX</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">2</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OX</font><font color="#000000">)</font> <font color="#434f54">&lt;</font> <font color="#000000">24</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">numberDots</font> <font color="#434f54">=</font> <font color="#000000">3</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">clearArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">currentArrow</font><font color="#434f54">++</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentArrow</font> <font color="#434f54">&lt;</font> <font color="#000000">4</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">3</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OX</font><font color="#000000">)</font> <font color="#434f54">&gt;</font> <font color="#000000">1000</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">numberDots</font> <font color="#434f54">=</font> <font color="#000000">3</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">clearArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">currentArrow</font><font color="#434f54">++</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentArrow</font> <font color="#434f54">&lt;</font> <font color="#000000">4</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>
<font color="#00979c">void</font> <font color="#000000">changeOY</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OY</font><font color="#000000">)</font> <font color="#434f54">&gt;</font> <font color="#000000">1000</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">numberDots</font> <font color="#434f54">=</font> <font color="#000000">3</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">clearArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">currentArrow</font><font color="#434f54">++</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentArrow</font> <font color="#434f54">&lt;</font> <font color="#000000">4</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>

 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">1</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OY</font><font color="#000000">)</font> <font color="#434f54">&lt;</font> <font color="#000000">24</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">numberDots</font> <font color="#434f54">=</font> <font color="#000000">3</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">clearArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">currentArrow</font><font color="#434f54">++</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">currentArrow</font> <font color="#434f54">&lt;</font> <font color="#000000">4</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">zeroState</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OX</font><font color="#000000">)</font> <font color="#434f54">&lt;</font> <font color="#000000">600</font> <font color="#434f54">&amp;&amp;</font> <font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OX</font><font color="#000000">)</font> <font color="#434f54">&gt;</font> <font color="#000000">400</font> <font color="#434f54">&amp;&amp;</font> <font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OY</font><font color="#000000">)</font> <font color="#434f54">&lt;</font> <font color="#000000">600</font> <font color="#434f54">&amp;&amp;</font> <font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">OY</font><font color="#000000">)</font> <font color="#434f54">&gt;</font> <font color="#000000">400</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">prepareText</font><font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">x_</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">y_</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">end_x</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">end_y</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">drawRect</font><font color="#000000">(</font><font color="#000000">x_</font><font color="#434f54">,</font> <font color="#000000">y_</font><font color="#434f54">,</font> <font color="#000000">end_x</font> <font color="#434f54">-</font> <font color="#000000">x_</font><font color="#434f54">,</font> <font color="#000000">end_y</font> <font color="#434f54">-</font> <font color="#000000">y_</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">fillRect</font><font color="#000000">(</font><font color="#000000">x_</font><font color="#434f54">,</font> <font color="#000000">y_</font><font color="#434f54">,</font> <font color="#000000">end_x</font> <font color="#434f54">-</font> <font color="#000000">x_</font><font color="#434f54">,</font> &nbsp;<font color="#000000">end_y</font> <font color="#434f54">-</font> <font color="#000000">y_</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>


<font color="#00979c">void</font> <font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">printText</font><font color="#000000">(</font><font color="#005c5f">&#34; UP &nbsp;&nbsp;&#34;</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">40</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">1</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">printText</font><font color="#000000">(</font><font color="#005c5f">&#34; DOWN &#34;</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">40</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">2</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">printText</font><font color="#000000">(</font><font color="#005c5f">&#34; LEFT &#34;</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">40</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font> <font color="#000000">arrows</font><font color="#000000">[</font><font color="#000000">currentArrow</font><font color="#000000">]</font> <font color="#434f54">==</font> <font color="#000000">3</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">printText</font><font color="#000000">(</font><font color="#005c5f">&#34; RIGHT &#34;</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">40</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>


<font color="#00979c">void</font> <font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">x</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">y</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">drawPixel</font><font color="#000000">(</font><font color="#000000">x</font><font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">BLACK</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>



<font color="#00979c">void</font> <font color="#000000">printArena</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">temp_y</font> <font color="#434f54">=</font> <font color="#000000">10</font><font color="#000000">;</font> <font color="#000000">temp_y</font> <font color="#434f54">&lt;</font> <font color="#000000">48</font><font color="#000000">;</font> <font color="#000000">temp_y</font> <font color="#434f54">+=</font> <font color="#000000">37</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">temp_x</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">temp_x</font> <font color="#434f54">&lt;</font> <font color="#000000">84</font><font color="#000000">;</font> <font color="#000000">temp_x</font><font color="#434f54">++</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#000000">temp_x</font><font color="#434f54">,</font> <font color="#000000">temp_y</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">temp_y</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#000000">temp_x</font><font color="#434f54">,</font> <font color="#000000">temp_y</font> <font color="#434f54">+</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">else</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#000000">temp_x</font><font color="#434f54">,</font> <font color="#000000">temp_y</font> <font color="#434f54">-</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">temp_x_</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">temp_x_</font> <font color="#434f54">&lt;</font> <font color="#000000">84</font><font color="#000000">;</font> <font color="#000000">temp_x_</font> <font color="#434f54">+=</font> <font color="#000000">83</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">temp_y_</font> <font color="#434f54">=</font> <font color="#000000">10</font><font color="#000000">;</font> <font color="#000000">temp_y_</font> <font color="#434f54">&lt;</font> <font color="#000000">48</font><font color="#000000">;</font> <font color="#000000">temp_y_</font><font color="#434f54">++</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#000000">temp_x_</font><font color="#434f54">,</font> <font color="#000000">temp_y_</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">temp_x_</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#000000">temp_x_</font> <font color="#434f54">+</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">temp_y_</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">else</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">drawAPixel</font><font color="#000000">(</font><font color="#000000">temp_x_</font> <font color="#434f54">-</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">temp_y_</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>


<font color="#00979c">void</font> <font color="#000000">printText</font><font color="#000000">(</font><font color="#00979c">String</font> <font color="#000000">text</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">x</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#00979c">int</font> <font color="#000000">color</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">color</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">color</font> <font color="#434f54">=</font> <font color="#000000">0xFFFF</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;BLACK</font>
 &nbsp;<font color="#5e6d03">else</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">color</font> <font color="#434f54">=</font> <font color="#000000">0x0000</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;WHITE</font>
 &nbsp;<font color="#00979c">const</font> <font color="#00979c">unsigned</font> <font color="#00979c">int</font> <font color="#000000">len</font> <font color="#434f54">=</font> <font color="#000000">text</font><font color="#434f54">.</font><font color="#d35400">length</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">char</font> <font color="#000000">table_text</font><font color="#000000">[</font><font color="#000000">len</font><font color="#000000">]</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">text</font><font color="#434f54">.</font><font color="#d35400">toCharArray</font><font color="#000000">(</font><font color="#000000">table_text</font><font color="#434f54">,</font> <font color="#000000">text</font><font color="#434f54">.</font><font color="#d35400">length</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">i</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">i</font> <font color="#434f54">&lt;</font> <font color="#000000">text</font><font color="#434f54">.</font><font color="#d35400">length</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#000000">i</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">drawChar</font><font color="#000000">(</font><font color="#000000">x</font> <font color="#434f54">+</font> <font color="#000000">6</font> <font color="#434f54">*</font> <font color="#000000">i</font> <font color="#434f54">,</font> <font color="#000000">y</font><font color="#434f54">,</font> <font color="#000000">table_text</font><font color="#000000">[</font><font color="#000000">i</font><font color="#000000">]</font><font color="#434f54">,</font> <font color="#000000">color</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">initGame</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;<font color="#000000">currentArrow</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;which arow is proccessed right now</font>
 &nbsp;<font color="#000000">comeBackToZero</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;after every good answer you have to come back to 0 position</font>
 &nbsp;<font color="#000000">winTheGame</font> &nbsp;<font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; global</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">clearDisplay</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">printArena</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">giveValues</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">drawSequence</font><font color="#000000">(</font><font color="#000000">20</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; y = 20</font>
 &nbsp;<font color="#000000">prepareText</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">83</font><font color="#434f54">,</font> <font color="#000000">9</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; make black under text</font>
 &nbsp;<font color="#000000">printText</font><font color="#000000">(</font><font color="#005c5f">&#34; make seq &#34;</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;print text</font>
 &nbsp;<font color="#000000">prepareText</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">38</font><font color="#434f54">,</font> <font color="#000000">50</font><font color="#434f54">,</font> <font color="#000000">47</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; this is black box on the bottom</font>
 &nbsp;<font color="#000000">getCurrentArrow</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#000000">runGame</font><font color="#000000">(</font><font color="#000000">)</font>
<font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">winTheGame</font> <font color="#434f54">==</font> <font color="#00979c">false</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">comeBackToZero</font> <font color="#434f54">==</font> <font color="#00979c">true</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">changeOX</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">changeOY</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">zeroState</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">changeNumberDots</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#434f54">!</font><font color="#000000">checkWin</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">-</font> <font color="#000000">timeChecker</font> <font color="#434f54">&gt;</font> <font color="#000000">TIMEFORGOODANSWER</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">numberDots</font> <font color="#434f54">&gt;</font> <font color="#000000">0</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">currentArrow</font> <font color="#434f54">&gt;</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">numberDots</font><font color="#434f54">--</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">dotsDisplay</font><font color="#000000">(</font><font color="#000000">numberDots</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">timeChecker</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;checks whether to start blinking digits again</font>
<font color="#00979c">void</font> <font color="#000000">checkblinkTimer</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#d35400">noBlink</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
<font color="#000000">}</font>
<font color="#434f54">&#47;&#47;checks whether to emit noise</font>
<font color="#00979c">void</font> <font color="#000000">checkAlarm</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#434f54">&#47;&#47; if the armed flag is enabled, the state is IDLS ( if you are editing, or it is already RING state, it will not change state to RING), and the current hour and minute matches the</font>
 &nbsp;<font color="#434f54">&#47;&#47; values in the alarm array, the state transitions into RING</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">armed</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">IDLS</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">(</font><font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">hour</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">==</font> <font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">&amp;&amp;</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">minute</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#434f54">==</font> <font color="#000000">alarmArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">RING</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">currentNote</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">currentAnimation</font> <font color="#434f54">=</font> <font color="#000000">RINGANIM</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">startAnimation</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">initGame</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font> <font color="#5e6d03">else</font> <font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#434f54">!</font><font color="#000000">armed</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">winTheGame</font> <font color="#434f54">&amp;&amp;</font> <font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">RING</font><font color="#000000">)</font> <font color="#000000">{</font> <font color="#434f54">&#47;&#47;if the armed flag is disable, but the state is RING (i.e. we are making noise) we turn off the noise</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">noTone</font><font color="#000000">(</font><font color="#000000">BUZZER</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;stop the tone on the buzzer</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">digitalWrite</font><font color="#000000">(</font><font color="#000000">BUZZER</font><font color="#434f54">,</font> <font color="#00979c">HIGH</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;the passive buzzer is active LOW, so we also need to write HIGH</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">state</font> <font color="#434f54">=</font> <font color="#000000">IDLS</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;transition into IDLS once again</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">clearDisplay</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">displayDate</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">readDHT</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#434f54">&#47;&#47; if the state is RING, play sound (one note)</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">RING</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">playMelody</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">runGame</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>
<font color="#00979c">void</font> <font color="#000000">displayDate</font><font color="#000000">(</font><font color="#000000">)</font>
<font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">RING</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">char</font> <font color="#000000">buf</font> <font color="#000000">[</font><font color="#000000">4</font><font color="#000000">]</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">12</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">12</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">IDLS</font> <font color="#434f54">||</font> <font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">EAHR</font> <font color="#434f54">||</font> <font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">EAMI</font> <font color="#434f54">||</font> <font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">RING</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">year</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">sprintf</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#434f54">,</font> <font color="#005c5f">&#34;%02d&#34;</font><font color="#434f54">,</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">month</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">sprintf</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#434f54">,</font> <font color="#005c5f">&#34;%02d&#34;</font><font color="#434f54">,</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">day</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">else</font>
 &nbsp;<font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">0</font><font color="#000000">]</font> <font color="#434f54">+</font> <font color="#000000">2000</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">sprintf</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#434f54">,</font> <font color="#005c5f">&#34;%02d&#34;</font><font color="#434f54">,</font> <font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">1</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;&#47;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">sprintf</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#434f54">,</font> <font color="#005c5f">&#34;%02d&#34;</font><font color="#434f54">,</font> <font color="#000000">dateArray</font><font color="#000000">[</font><font color="#000000">2</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">buf</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>
<font color="#00979c">void</font> <font color="#000000">readDHT</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">state</font> <font color="#434f54">==</font> <font color="#000000">RING</font><font color="#000000">)</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">return</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#000000">temp</font><font color="#434f54">,</font> <font color="#000000">hum</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">dht11</font><font color="#434f54">.</font><font color="#d35400">read</font><font color="#000000">(</font><font color="#434f54">&amp;</font><font color="#000000">temp</font><font color="#434f54">,</font> <font color="#434f54">&amp;</font><font color="#000000">hum</font><font color="#434f54">,</font> <font color="#00979c">NULL</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">12</font><font color="#434f54">,</font> <font color="#000000">24</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">12</font><font color="#434f54">,</font> <font color="#000000">24</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">temp</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;*C &#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">hum</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;%RH&#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#434f54">&#47;&#47;run once, at first</font>
<font color="#00979c">void</font> <font color="#5e6d03">setup</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">BB1</font><font color="#434f54">,</font> <font color="#00979c">INPUT_PULLUP</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;set pins as input, with PULLUP resistor if necessary</font>
 &nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">BL</font><font color="#434f54">,</font> <font color="#00979c">INPUT_PULLUP</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">BB2</font><font color="#434f54">,</font> <font color="#00979c">INPUT_PULLUP</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">BR</font><font color="#434f54">,</font> <font color="#00979c">INPUT</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; initializes the display</font>
 &nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">setBacklight</font><font color="#000000">(</font><font color="#000000">100</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; set the brightness to 100 %</font>
 &nbsp;<font color="#d35400">Timer1</font><font color="#434f54">.</font><font color="#d35400">initialize</font><font color="#000000">(</font><font color="#000000">500000</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;set the timer1 period to 500.000 microseconds</font>
 &nbsp;<font color="#d35400">Timer1</font><font color="#434f54">.</font><font color="#d35400">attachInterrupt</font><font color="#000000">(</font><font color="#000000">displayTime</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;attach displayTime as interrupt service routine to Timer1</font>
 &nbsp;<font color="#d35400">Wire</font><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; initialize the i2c library</font>
 &nbsp;<font color="#000000">RTC</font><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47; start the clock</font>
 &nbsp;<font color="#000000">RTC</font><font color="#434f54">.</font><font color="#d35400">adjust</font><font color="#000000">(</font><b><font color="#d35400">DateTime</font></b><font color="#000000">(</font><font color="#5e6d03">__DATE__</font><font color="#434f54">,</font> <font color="#5e6d03">__TIME__</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;initialize the clock with the compilation date and time</font>
 &nbsp;<font color="#d35400">now</font> <font color="#434f54">=</font> <font color="#000000">RTC</font><font color="#434f54">.</font><font color="#d35400">now</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">attachInterrupt</font><font color="#000000">(</font><font color="#d35400">digitalPinToInterrupt</font><font color="#000000">(</font><font color="#000000">2</font><font color="#000000">)</font><font color="#434f54">,</font> <font color="#000000">BLHandler</font><font color="#434f54">,</font> <font color="#00979c">CHANGE</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;attach interrupt on digital PIN 2, use BLHandler as interrupt service routine, trigger the interrupt on every state change</font>
 &nbsp;<font color="#000000">BLHandler</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#434f54">&#47;&#47;read initial status of the DPDT button, to record if the alarm is already on</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">clearDisplay</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">setContrast</font><font color="#000000">(</font><font color="#000000">30</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#000000">setTextColor</font><font color="#000000">(</font><font color="#000000">0xFFFF</font><font color="#434f54">,</font> <font color="#000000">0x0000</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">nokiaDisplay</font><font color="#434f54">.</font><font color="#d35400">display</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">displayDate</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">readDHT</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<b><font color="#d35400">Entropy</font></b><font color="#434f54">.</font><font color="#d35400">initialize</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">randomSeed</font><font color="#000000">(</font> <b><font color="#d35400">Entropy</font></b><font color="#434f54">.</font><font color="#d35400">random</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">delay</font><font color="#000000">(</font><font color="#000000">2000</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">startAnimation</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#5e6d03">loop</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">long</font> <font color="#000000">sequenceDelay</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">long</font> <font color="#000000">secondPeriod</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">static</font> <font color="#00979c">bool</font> <font color="#000000">screenUpdated</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;<font color="#d35400">now</font> <font color="#434f54">=</font> <font color="#000000">RTC</font><font color="#434f54">.</font><font color="#d35400">now</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;record the current time from the clock</font>
 &nbsp;<font color="#00979c">byte</font> <font color="#d35400">second</font> <font color="#434f54">=</font> <font color="#d35400">now</font><font color="#434f54">.</font><font color="#d35400">second</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#00979c">long</font> <font color="#000000">curr</font> <font color="#434f54">=</font> <font color="#d35400">millis</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;
 &nbsp;<font color="#000000">pollButtons</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;<font color="#434f54">&#47;&#47;polls the buttons</font>
 &nbsp;<font color="#000000">checkAlarm</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font> &nbsp;&nbsp;<font color="#434f54">&#47;&#47;check if it&#39;s time to play the alarm</font>
 &nbsp;&nbsp;&nbsp;
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">sequenceDelay</font> <font color="#434f54">+</font> <font color="#000000">500</font> <font color="#434f54">&lt;</font> <font color="#000000">curr</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font><font color="#000000">(</font> <font color="#000000">rep</font> <font color="#434f54">&lt;</font> <font color="#000000">REPS</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">animate</font><font color="#000000">(</font><font color="#000000">animations</font><font color="#000000">[</font><font color="#000000">currentAnimation</font><font color="#000000">]</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">sequenceDelay</font> <font color="#434f54">=</font> <font color="#000000">curr</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">else</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">lc</font><font color="#434f54">.</font><font color="#d35400">shutdown</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font><font color="#00979c">true</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">blinkTimer</font> <font color="#434f54">+</font> <font color="#000000">1000</font> <font color="#434f54">&lt;</font> <font color="#000000">curr</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">noBlink</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">secondPeriod</font> <font color="#434f54">+</font> <font color="#000000">1000</font> <font color="#434f54">&lt;</font> <font color="#000000">curr</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#00979c">short</font> <font color="#000000">phread</font> <font color="#434f54">=</font> <font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">PHOTORES</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">lc</font><font color="#434f54">.</font><font color="#d35400">setIntensity</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#d35400">map</font><font color="#000000">(</font><font color="#000000">phread</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">1023</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">15</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47;0 - 15</font>
 &nbsp;&nbsp;&nbsp;<font color="#d35400">display</font><font color="#434f54">.</font><font color="#d35400">setBacklight</font><font color="#000000">(</font><font color="#d35400">map</font><font color="#000000">(</font><font color="#000000">phread</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">1023</font><font color="#434f54">,</font> <font color="#000000">10</font><font color="#434f54">,</font> <font color="#000000">100</font><font color="#000000">)</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; 0 -100</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">secondPeriod</font> <font color="#434f54">=</font> <font color="#000000">curr</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#d35400">second</font> <font color="#434f54">&gt;</font> <font color="#000000">0</font><font color="#000000">)</font> <font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">screenUpdated</font> <font color="#434f54">=</font> <font color="#00979c">false</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">if</font> <font color="#000000">(</font><font color="#000000">screenUpdated</font> <font color="#434f54">==</font> <font color="#00979c">false</font> <font color="#434f54">&amp;&amp;</font> <font color="#d35400">second</font> <font color="#434f54">==</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">{</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">displayDate</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">readDHT</font><font color="#000000">(</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">screenUpdated</font> <font color="#434f54">=</font> <font color="#00979c">true</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
<font color="#000000">}</font>

</pre>